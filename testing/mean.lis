     1                                  ;****************************************************************************************************************************
     2                                  ;Program name: "Arrays of floats".  This program takes floating point number inputs from the user and puts them in an array. The array values are then printed, along with the variance of the numbers.
     3                                  ; Copyright (C) 2025  Konner Rigby.          *
     4                                  ;                                                                                                                           *
     5                                  ;This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License  *
     6                                  ;version 3 as published by the Free Software Foundation.  This program is distributed in the hope that it will be useful,   *
     7                                  ;but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See   *
     8                                  ;the GNU General Public License for more details A copy of the GNU General Public License v3 is available here:             *
     9                                  ;<https://www.gnu.org/licenses/>.                                                                                           *
    10                                  ;****************************************************************************************************************************
    11                                  
    12                                  
    13                                  
    14                                  
    15                                  ;========1=========2=========3=========4=========5=========6=========7=========8=========9=========0=========1=========2=========3**
    16                                  ; Author information
    17                                  ; Author: Konner Rigby
    18                                  ; Author Email: rigbykonner@csu.fullerton.edu or rigbykonner@gmail.com
    19                                  ; CWID: 884547654
    20                                  ; Class: 240-03 Section 03
    21                                  ;
    22                                  ;Program information
    23                                  ;  Program name: Arrays of floats
    24                                  ;  Programming languages: Two modules in C, six in x86, and one in bash
    25                                  ;  Date program began: 2025-Sep-16
    26                                  ;  Date of last update: 2025-Sep-17
    27                                  ;  Files in this program: main.cpp, manager.asm, input_array.asm, mean.asm, isfloat.asm,
    28                                  ;  display_array.c, magnitude.asm, append.asm, r.sh.
    29                                  ;  Testing: Alpha testing completed.  All functions are correct.
    30                                  ;  Status: Ready for release to customers
    31                                  ;
    32                                  ;Purpose
    33                                  ;  This program takes floating point number inputs from the user and puts them in an array. The array
    34                                  ;  values are then printed, along with the variance of the numbers.
    35                                  ;
    36                                  ;This file:
    37                                  ;  File name: mean.asm
    38                                  ;  Language: X86-64
    39                                  ;  Max page width: 124 columns
    40                                  ;  Assemble (standard): nasm -f elf64 -l input.lis -o input.o input_array.asm
    41                                  ;  Assemble (debug): nasm -f elf64 -gdwarf -l input.lis -o input.o input_array.asm
    42                                  ;  Optimal print specification: Landscape, 7 points, monospace, 8Â½x11 paper
    43                                  ;  Prototype of this function: extern double input_array();
    44                                  ; 
    45                                  ;
    46                                  ;
    47                                  ;
    48                                  ;========1=========2=========3=========4=========5=========6=========7=========8=========9=========0=========1=========2=========3**
    49                                  
    50                                  ; mean.asm
    51                                  ; mean.asm
    52                                  global mean
    53                                  
    54                                  segment .text
    55                                  mean:
    56                                      ; === Standard Prologue ===
    57 00000000 55                          push    rbp
    58 00000001 4889E5                      mov     rbp, rsp
    59 00000004 4154                        push    r12
    60 00000006 4155                        push    r13
    61 00000008 4156                        push    r14
    62                                  
    63 0000000A 4989FC                      mov     r12, rdi      ; array pointer
    64 0000000D 4989F5                      mov     r13, rsi      ; size
    65 00000010 4D31F6                      xor     r14, r14      ; loop counter
    66 00000013 660F57C0                    xorpd   xmm0, xmm0    ; accumulator (REPLACED pxor)
    67                                  
    68 00000017 4983FD00                    cmp     r13, 0
    69 0000001B 7419                        je      finish
    70                                  
    71                                  sum_loop_mean:
    72 0000001D 4D39EE                      cmp     r14, r13
    73 00000020 7D0B                        jge     calculate_mean
    74 00000022 F2430F5804F4                addsd   xmm0, [r12 + r14 * 8]
    75 00000028 49FFC6                      inc     r14
    76 0000002B EBF0                        jmp     sum_loop_mean
    77                                  
    78                                  calculate_mean:
    79 0000002D F2480F2ACE                  cvtsi2sd xmm1, rsi
    80 00000032 F20F5EC1                    divsd   xmm0, xmm1
    81                                  
    82                                  finish:
    83                                      ; === Standard Epilogue ===
    84 00000036 415E                        pop     r14
    85 00000038 415D                        pop     r13
    86 0000003A 415C                        pop     r12
    87 0000003C 5D                          pop     rbp
    88 0000003D C3                          ret
