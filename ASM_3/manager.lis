     1                                  ;****************************************************************************************************************************
     2                                  ;* Program name: GNU Sort Debugger                                                                                          *
     3                                  ;* Copyright (C) 2025 Konner Rigby.                                                                                         *
     4                                  ;* This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License  *
     5                                  ;* version 3 as published by the Free Software Foundation. This program is distributed in the hope that it will be useful,   *
     6                                  ;* but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See    *
     7                                  ;* the GNU General Public License for more details. A copy of the GNU General Public License v3 is available here:          *
     8                                  ;* <https://www.gnu.org/licenses/>.                                                                                         *
     9                                  ;****************************************************************************************************************************
    10                                  
    11                                  ;========1=========2=========3=========4=========5=========6=========7=========8=========9=========0=========1=========2=========3**
    12                                  ; Author information
    13                                  ; Author: Konner Rigby
    14                                  ; Author Email: rigbykonner@csu.fullerton.edu or rigbykonner@gmail.com
    15                                  ; CWID: 884547654
    16                                  ; Class: 240-03 Section 03
    17                                  ;
    18                                  ; Program information
    19                                  ;   Program name: GNU Sort Debugger
    20                                  ;   Programming languages: C, x86-64 Assembly, Bash
    21                                  ;   Date program began: 2025-Oct-03
    22                                  ;   Date of last update: 2025-Oct-10
    23                                  ;   Files in this program: executive.c, manager.asm, inputarray.asm, outputarray.asm, sum.asm, sort.c, swap.asm,
    24                                  ;                          isfloat.asm, backuprestore.inc, r.sh
    25                                  ;   Status: Ready for GDB debugging.
    26                                  ;
    27                                  ; Purpose
    28                                  ;   This program serves as a workspace to experiment with and learn the capabilities of the GNU Debugger (GDB).
    29                                  ;
    30                                  ; This file
    31                                  ;   File name: manager.asm
    32                                  ;   Language: x86-64 Assembly
    33                                  ;   Assemble: nasm -f elf64 -g -F dwarf -o manager.o manager.asm
    34                                  ;   Purpose: The central assembly module. It orchestrates the program flow by calling all other functions.
    35                                  ;========1=========2=========3=========4=========5=========6=========7=========8=========9=========0=========1=========2=========3**
    36                                  
    37                                  extern printf, fgets, input_array, outputarray, sum, sort, stdin
    38                                  global manager
    39                                  
    40                                  section .data
    41 00000000 506C6561736520656E-         prompt_name         db "Please enter your name: ", 0
    41 00000009 74657220796F757220-
    41 00000012 6E616D653A2000     
    42 00000019 5468616E6B20796F75-         thank_you_name      db "Thank you %s", 0
    42 00000022 20257300           
    43 00000026 506C6561736520656E-         prompt_occupation   db "Please enter your future occupation: ", 0
    43 0000002F 74657220796F757220-
    43 00000038 667574757265206F63-
    43 00000041 6375706174696F6E3A-
    43 0000004A 2000               
    44 0000004C 5468616E6B20796F75-         thank_you_occ       db "Thank you. We like %s", 0
    44 00000055 2E205765206C696B65-
    44 0000005E 20257300           
    45 00000062 506C6561736520656E-         prompt_numbers      db "Please enter float numbers separated by ws. Press enter followed by cont-d to terminate.", 10, 0
    45 0000006B 74657220666C6F6174-
    45 00000074 206E756D6265727320-
    45 0000007D 736570617261746564-
    45 00000086 2062792077732E2050-
    45 0000008F 7265737320656E7465-
    45 00000098 7220666F6C6C6F7765-
    45 000000A1 6420627920636F6E74-
    45 000000AA 2D6420746F20746572-
    45 000000B3 6D696E6174652E0A00 
    46 000000BC 5468616E6B20796F75-         entered_numbers_msg db "Thank you. You entered these numbers:", 10, 0
    46 000000C5 2E20596F7520656E74-
    46 000000CE 657265642074686573-
    46 000000D7 65206E756D62657273-
    46 000000E0 3A0A00             
    47 000000E3 5468652073756D206F-         sum_msg             db "The sum of values in this array is %.1f", 10, 0
    47 000000EC 662076616C75657320-
    47 000000F5 696E20746869732061-
    47 000000FE 727261792069732025-
    47 00000107 2E31660A00         
    48 0000010C 546865206172726179-         sorting_msg         db "The array will now be sorted.", 10, 0
    48 00000115 2077696C6C206E6F77-
    48 0000011E 20626520736F727465-
    48 00000127 642E0A00           
    49 0000012B 546865736520617265-         sorted_array_msg    db "These are the current values in the array:", 10, 0
    49 00000134 207468652063757272-
    49 0000013D 656E742076616C7565-
    49 00000146 7320696E2074686520-
    49 0000014F 61727261793A0A00   
    50 00000157 546869732070726F67-         terminate_msg       db "This program will terminate.", 10, 0
    50 00000160 72616D2077696C6C20-
    50 00000169 7465726D696E617465-
    50 00000172 2E0A00             
    51 00000175 486176652061206E69-         nice_day_msg        db "Have a nice day %s", 10, 0
    51 0000017E 636520646179202573-
    51 00000187 0A00               
    52 00000189 496E76697465206120-         invite_msg          db "Invite a %s to come with you next time.", 10, 0
    52 00000192 257320746F20636F6D-
    52 0000019B 65207769746820796F-
    52 000001A4 75206E657874207469-
    52 000001AD 6D652E0A00         
    53 000001B2 0A00                        newline             db 10, 0
    54                                  
    55                                  section .bss
    56 00000000 <res 64h>                   user_name       resb 100
    57 00000064 <res 64h>                   user_occupation resb 100
    58 000000C8 <res 190h>                  go              resq 50
    59                                  
    60                                  section .text
    61                                  
    62                                  remove_newline:
    63 00000000 51                          push    rcx
    64 00000001 B900000000                  mov     rcx, 0
    65                                  find_newline_loop:
    66 00000006 803C0F0A                    cmp     byte [rdi + rcx], 10
    67 0000000A 740B                        je      replace_newline
    68 0000000C 803C0F00                    cmp     byte [rdi + rcx], 0
    69 00000010 7409                        je      newline_not_found
    70 00000012 48FFC1                      inc     rcx
    71 00000015 EBEF                        jmp     find_newline_loop
    72                                  replace_newline:
    73 00000017 C6040F00                    mov     byte [rdi + rcx], 0
    74                                  newline_not_found:
    75 0000001B 59                          pop     rcx
    76 0000001C C3                          ret
    77                                  
    78                                  manager:
    79 0000001D 55                          push    rbp
    80 0000001E 4889E5                      mov     rbp, rsp
    81 00000021 4883EC08                    sub     rsp, 8
    82 00000025 53                          push    rbx
    83 00000026 4154                        push    r12
    84 00000028 4155                        push    r13
    85                                  
    86 0000002A 48BF-                       mov     rdi, prompt_name
    86 0000002C [0000000000000000] 
    87 00000034 B800000000                  mov     rax, 0
    88 00000039 E8(00000000)                call    printf
    89 0000003E 48BF-                       mov     rdi, user_name
    89 00000040 [0000000000000000] 
    90 00000048 BE64000000                  mov     rsi, 100
    91 0000004D 488B1425[00000000]          mov     rdx, [stdin]
    92 00000055 E8(00000000)                call    fgets
    93 0000005A 48BF-                       mov     rdi, thank_you_name
    93 0000005C [1900000000000000] 
    94 00000064 48BE-                       mov     rsi, user_name
    94 00000066 [0000000000000000] 
    95 0000006E B800000000                  mov     rax, 0
    96 00000073 E8(00000000)                call    printf
    97                                  
    98 00000078 48BF-                       mov     rdi, prompt_occupation
    98 0000007A [2600000000000000] 
    99 00000082 B800000000                  mov     rax, 0
   100 00000087 E8(00000000)                call    printf
   101 0000008C 48BF-                       mov     rdi, user_occupation
   101 0000008E [6400000000000000] 
   102 00000096 BE64000000                  mov     rsi, 100
   103 0000009B 488B1425[00000000]          mov     rdx, [stdin]
   104 000000A3 E8(00000000)                call    fgets
   105 000000A8 48BF-                       mov     rdi, thank_you_occ
   105 000000AA [4C00000000000000] 
   106 000000B2 48BE-                       mov     rsi, user_occupation
   106 000000B4 [6400000000000000] 
   107 000000BC B800000000                  mov     rax, 0
   108 000000C1 E8(00000000)                call    printf
   109 000000C6 48BF-                       mov     rdi, newline
   109 000000C8 [B201000000000000] 
   110 000000D0 B800000000                  mov     rax, 0
   111 000000D5 E8(00000000)                call    printf
   112                                  
   113 000000DA 48BF-                       mov     rdi, prompt_numbers
   113 000000DC [6200000000000000] 
   114 000000E4 B800000000                  mov     rax, 0
   115 000000E9 E8(00000000)                call    printf
   116 000000EE 48BF-                       mov     rdi, go
   116 000000F0 [C800000000000000] 
   117 000000F8 BE32000000                  mov     rsi, 50
   118 000000FD E8(00000000)                call    input_array
   119 00000102 4989C4                      mov     r12, rax
   120                                  
   121 00000105 48BF-                       mov     rdi, entered_numbers_msg
   121 00000107 [BC00000000000000] 
   122 0000010F B800000000                  mov     rax, 0
   123 00000114 E8(00000000)                call    printf
   124 00000119 48BF-                       mov     rdi, go
   124 0000011B [C800000000000000] 
   125 00000123 4C89E6                      mov     rsi, r12
   126 00000126 E8(00000000)                call    outputarray
   127                                  
   128 0000012B 48BF-                       mov     rdi, go
   128 0000012D [C800000000000000] 
   129 00000135 4C89E6                      mov     rsi, r12
   130 00000138 E8(00000000)                call    sum
   131 0000013D F20F1145F8                  movsd   [rbp - 8], xmm0
   132 00000142 48BF-                       mov     rdi, sum_msg
   132 00000144 [E300000000000000] 
   133 0000014C B801000000                  mov     rax, 1
   134 00000151 E8(00000000)                call    printf
   135                                  
   136 00000156 48BF-                       mov     rdi, sorting_msg
   136 00000158 [0C01000000000000] 
   137 00000160 B800000000                  mov     rax, 0
   138 00000165 E8(00000000)                call    printf
   139 0000016A 48BF-                       mov     rdi, go
   139 0000016C [C800000000000000] 
   140 00000174 4C89E6                      mov     rsi, r12
   141 00000177 E8(00000000)                call    sort
   142                                  
   143 0000017C 48BF-                       mov     rdi, sorted_array_msg
   143 0000017E [2B01000000000000] 
   144 00000186 B800000000                  mov     rax, 0
   145 0000018B E8(00000000)                call    printf
   146 00000190 48BF-                       mov     rdi, go
   146 00000192 [C800000000000000] 
   147 0000019A 4C89E6                      mov     rsi, r12
   148 0000019D E8(00000000)                call    outputarray
   149                                  
   150 000001A2 48BF-                       mov     rdi, terminate_msg
   150 000001A4 [5701000000000000] 
   151 000001AC B800000000                  mov     rax, 0
   152 000001B1 E8(00000000)                call    printf
   153 000001B6 48BF-                       mov     rdi, user_name
   153 000001B8 [0000000000000000] 
   154 000001C0 E83BFEFFFF                  call    remove_newline
   155 000001C5 48BF-                       mov     rdi, nice_day_msg
   155 000001C7 [7501000000000000] 
   156 000001CF 48BE-                       mov     rsi, user_name
   156 000001D1 [0000000000000000] 
   157 000001D9 B800000000                  mov     rax, 0
   158 000001DE E8(00000000)                call    printf
   159 000001E3 48BF-                       mov     rdi, user_occupation
   159 000001E5 [6400000000000000] 
   160 000001ED E80EFEFFFF                  call    remove_newline
   161 000001F2 48BF-                       mov     rdi, invite_msg
   161 000001F4 [8901000000000000] 
   162 000001FC 48BE-                       mov     rsi, user_occupation
   162 000001FE [6400000000000000] 
   163 00000206 B800000000                  mov     rax, 0
   164 0000020B E8(00000000)                call    printf
   165                                  
   166 00000210 F20F1045F8                  movsd   xmm0, [rbp - 8]
   167                                  
   168 00000215 415D                        pop     r13
   169 00000217 415C                        pop     r12
   170 00000219 5B                          pop     rbx
   171 0000021A 4889EC                      mov     rsp, rbp
   172 0000021D 5D                          pop     rbp
   173 0000021E C3                          ret
